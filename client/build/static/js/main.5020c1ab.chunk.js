(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{18:function(e,l,t){},29:function(e,l,t){},30:function(e,l,t){},32:function(e,l,t){},33:function(e,l,t){},34:function(e,l,t){},40:function(e,l,t){},41:function(e,l,t){},42:function(e,l,t){},43:function(e,l,t){"use strict";t.r(l);var i,o=t(1),n=t.n(o),s=t(20),a=t.n(s),c=t(7),r=t(2),d=(t(29),t(12));t(30);!function(e){e[e.EmptySlot=0]="EmptySlot",e[e.FilledSlot=1]="FilledSlot",e[e.DroppableEmptySlot=2]="DroppableEmptySlot",e[e.DeletePeg=3]="DeletePeg",e[e.SelectedPeg=4]="SelectedPeg",e[e.InvisiblePeg=5]="InvisiblePeg"}(i||(i={}));var S,u=["EmptySlot","FilledSlot","DroppableEmptySlot","DeletePeg","SelectedPeg","InvisiblePeg"];!function(e){e.CleanAndSelect="CLEAN_AND_SELECT",e.NewGame="NEW_GAME",e.ExitGame="EXIT_GAME",e.Undo="UNDO",e.Redo="REDO",e.Restart="RESTART",e.SelectAPeg="SELECT_A_PEG",e.MoveComplete="MOVE_COMPLETE"}(S||(S={}));var v=function(e){var l=[];return e[0]-2>=0&&l.push([e[0]-2,e[1]]),e[1]+2<=6&&l.push([e[0],e[1]+2]),e[0]+2<=6&&l.push([e[0]+2,e[1]]),e[1]-2>=0&&l.push([e[0],e[1]-2]),l},b=function(e){var l=[];return e[0]-2>=0&&l.push([e[0]-1,e[1]]),e[1]+2<=6&&l.push([e[0],e[1]+1]),e[0]+2<=6&&l.push([e[0]+1,e[1]]),e[1]-2>=0&&l.push([e[0],e[1]-1]),l},p=t(0),h=function(e){var l=e.pegType,t=e.pegCoords,o=e.selectedPeg,s=e.setSelectedPeg,a=e.selfBoardState,c=e.selfBoardStateDispatch,r=e.type;return n.a.useEffect((function(){console.log("# Peg Re-render")}),[l,t]),Object(p.jsx)("div",{className:u[l],onClick:"SELF"===r?function(){if(l===i.FilledSlot||l===i.DeletePeg){var e={EmptySlot:[],FilledSlot:[],DroppableEmptySlot:[],DeletePeg:[],SelectedPeg:[],InvisiblePeg:[]},n=v(t),r=b(t),d=!1;r.forEach((function(l,o){a[n[o][0]][n[o][1]]!==i.EmptySlot&&a[n[o][0]][n[o][1]]!==i.DroppableEmptySlot||a[l[0]][l[1]]!==i.FilledSlot&&a[l[0]][l[1]]!==i.SelectedPeg&&a[l[0]][l[1]]!==i.DeletePeg||(e.SelectedPeg.push(t),e.DroppableEmptySlot.push(n[o]),e.DeletePeg.push(l),d=!0)})),d&&(c({type:S.SelectAPeg,payload:e}),s(t))}else if(l===i.DroppableEmptySlot){var u=v(t),p=b(t),h={EmptySlot:[],FilledSlot:[],DroppableEmptySlot:[],DeletePeg:[],SelectedPeg:[],InvisiblePeg:[]};h.EmptySlot.push(o);var g=-1;u.forEach((function(e,l){e[0]===o[0]&&e[1]===o[1]&&(g=l)})),h.EmptySlot.push(p[g]),h.FilledSlot.push(t),c({type:S.MoveComplete,payload:h}),s([-1,-1])}}:function(){}})},g=(t(32),t(18),function(e){var l=e.title,t=e.style,i=e.clickHandler;return Object(p.jsx)("div",{className:"btn",style:t,onClick:function(){i()},children:l})}),F=(t(33),function(e){var l=e.closeFunction,t=e.newGame,i=e.pegsRemaining;return Object(p.jsx)("div",{className:"modal",children:Object(p.jsxs)("div",{className:"modal-body",children:[Object(p.jsx)("div",{className:"close-btn",onClick:function(){l()},children:"X"}),Object(p.jsx)("div",{className:"game-over-msg",children:"Game Over!!!"}),Object(p.jsx)("div",{className:"ran-out-of-moves",children:"You have ran out of moves :D"}),"Score: ",32-i,Object(p.jsx)(g,{clickHandler:t,title:"New Game",style:{marginTop:"1.5rem"}})]})})}),m=t(17),f=t(8),j=function(e){var l=Object(f.a)(e);return l.forEach((function(e,t){e.forEach((function(e,o){e===i.DeletePeg?l[t][o]=i.FilledSlot:e===i.DroppableEmptySlot?l[t][o]=i.EmptySlot:e===i.SelectedPeg&&(l[t][o]=i.FilledSlot)}))})),l},P=function(e,l){return l.SelectedPeg.forEach((function(l){e[l[0]][l[1]]=i.SelectedPeg})),l.EmptySlot.forEach((function(l){e[l[0]][l[1]]=i.EmptySlot})),l.DeletePeg.forEach((function(l){e[l[0]][l[1]]=i.DeletePeg})),l.DroppableEmptySlot.forEach((function(l){e[l[0]][l[1]]=i.DroppableEmptySlot})),l.FilledSlot.forEach((function(l){e[l[0]][l[1]]=i.FilledSlot})),Object(f.a)(e)},E=[[i.InvisiblePeg,i.InvisiblePeg,i.FilledSlot,i.FilledSlot,i.FilledSlot,i.InvisiblePeg,i.InvisiblePeg],[i.InvisiblePeg,i.InvisiblePeg,i.FilledSlot,i.FilledSlot,i.FilledSlot,i.InvisiblePeg,i.InvisiblePeg],[i.FilledSlot,i.FilledSlot,i.FilledSlot,i.FilledSlot,i.FilledSlot,i.FilledSlot,i.FilledSlot],[i.FilledSlot,i.FilledSlot,i.FilledSlot,i.EmptySlot,i.FilledSlot,i.FilledSlot,i.FilledSlot],[i.FilledSlot,i.FilledSlot,i.FilledSlot,i.FilledSlot,i.FilledSlot,i.FilledSlot,i.FilledSlot],[i.InvisiblePeg,i.InvisiblePeg,i.FilledSlot,i.FilledSlot,i.FilledSlot,i.InvisiblePeg,i.InvisiblePeg],[i.InvisiblePeg,i.InvisiblePeg,i.FilledSlot,i.FilledSlot,i.FilledSlot,i.InvisiblePeg,i.InvisiblePeg]],y=t(21),O=t(22),I=new(function(){function e(l){Object(y.a)(this,e),this.validMoves=void 0,this.currentGameState=void 0,this.movesHistory=void 0,this.currentGameState=l,this.movesHistory=[],this.validMoves=[[[1,3],[2,3],[3,3]],[[3,5],[3,4],[3,3]],[[5,3],[4,3],[3,3]],[[3,1],[3,2],[3,3]]]}return Object(O.a)(e,[{key:"calculateNewValidMoves",value:function(e){var l=this;this.currentGameState[e[0][0]][e[0][1]]=i.EmptySlot,this.currentGameState[e[1][0]][e[1][1]]=i.EmptySlot,this.currentGameState[e[2][0]][e[2][1]]=i.FilledSlot,this.movesHistory.push(e),this.handleFilledSlotDestruction(e),this.handleDropSlotDestruction(e),this.handleDropSlotCreation(e).forEach((function(e){l.validMoves.push(e)})),this.handleFilledSlotCreation(e).forEach((function(e){l.validMoves.push(e)}))}},{key:"handleDropSlotCreation",value:function(e){var l=this,t=[],o=b(e[0]),n=v(e[0]);o.forEach((function(o,s){l.currentGameState[o[0]][o[1]]===i.FilledSlot&&l.currentGameState[n[s][0]][n[s][1]]===i.FilledSlot&&t.push([n[s],o,e[0]])}));var s=b(e[1]),a=v(e[1]);return s.forEach((function(o,n){l.currentGameState[o[0]][o[1]]===i.FilledSlot&&l.currentGameState[a[n][0]][a[n][1]]===i.FilledSlot&&t.push([a[n],o,e[1]])})),t}},{key:"handleFilledSlotCreation",value:function(e){var l=this,t=[],o=b(e[2]),n=v(e[2]);o.forEach((function(o,s){l.currentGameState[o[0]][o[1]]===i.FilledSlot&&l.currentGameState[n[s][0]][n[s][1]]===i.EmptySlot&&t.push([e[2],o,n[s]])}));var s=function(e){var l=[];return e[0]-1>=0?l.push([e[0]-1,e[1]]):l.push([6,6]),e[1]+1<=6?l.push([e[0],e[1]+1]):l.push([6,6]),e[0]+1<=6?l.push([e[0]+1,e[1]]):l.push([6,6]),e[1]-1>=0?l.push([e[0],e[1]-1]):l.push([6,6]),l}(e[2]);return s.forEach((function(o,n){var a=x(n);l.currentGameState[o[0]][o[1]]===i.FilledSlot&&l.currentGameState[s[a][0]][s[a][1]]===i.EmptySlot&&t.push([o,e[2],s[a]])})),t}},{key:"handleFilledSlotDestruction",value:function(e){var l=[];this.validMoves=this.validMoves.filter((function(t){return!(N(e[0],t[0])||N(e[0],t[1])||N(e[1],t[0])||N(e[1],t[1]))||(l.push(t),!1)}))}},{key:"handleDropSlotDestruction",value:function(e){var l=[];this.validMoves=this.validMoves.filter((function(t){return!N(e[2],t[2])||(l.push(t),!1)}))}},{key:"printValidMovesWithoutRepeatitionsAndReturnCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,l=[];return this.validMoves.forEach((function(e){l.includes(e.flat().toString())||l.push(e.flat().toString())})),1===e&&console.log("Valid Moves (".concat(l.length,")"),l),l.length}},{key:"newGame",value:function(){this.currentGameState=[[i.InvisiblePeg,i.InvisiblePeg,i.FilledSlot,i.FilledSlot,i.FilledSlot,i.InvisiblePeg,i.InvisiblePeg],[i.InvisiblePeg,i.InvisiblePeg,i.FilledSlot,i.FilledSlot,i.FilledSlot,i.InvisiblePeg,i.InvisiblePeg],[i.FilledSlot,i.FilledSlot,i.FilledSlot,i.FilledSlot,i.FilledSlot,i.FilledSlot,i.FilledSlot],[i.FilledSlot,i.FilledSlot,i.FilledSlot,i.EmptySlot,i.FilledSlot,i.FilledSlot,i.FilledSlot],[i.FilledSlot,i.FilledSlot,i.FilledSlot,i.FilledSlot,i.FilledSlot,i.FilledSlot,i.FilledSlot],[i.InvisiblePeg,i.InvisiblePeg,i.FilledSlot,i.FilledSlot,i.FilledSlot,i.InvisiblePeg,i.InvisiblePeg],[i.InvisiblePeg,i.InvisiblePeg,i.FilledSlot,i.FilledSlot,i.FilledSlot,i.InvisiblePeg,i.InvisiblePeg]],this.movesHistory=[],this.validMoves=[[[1,3],[2,3],[3,3]],[[3,5],[3,4],[3,3]],[[5,3],[4,3],[3,3]],[[3,1],[3,2],[3,3]]]}}]),e}())(Object(f.a)(E)),x=function(e){return 0===e?2:1===e?3:2===e?0:1},N=function(e,l){return e[0]===l[0]&&e[1]===l[1]},D=I,G=function(e,l){switch(l.type){case S.MoveComplete:var t=Object(f.a)(e);t=j(t);var o=Object(m.a)({},l.payload);return t=P(t,o),D.calculateNewValidMoves([o.EmptySlot[0],o.EmptySlot[1],o.FilledSlot[0]]),t;case S.SelectAPeg:var n=Object(f.a)(e);n=j(n);var s=Object(m.a)({},l.payload);return n=P(n,s);case S.NewGame:return console.log("NEW GAME"),[[i.InvisiblePeg,i.InvisiblePeg,i.FilledSlot,i.FilledSlot,i.FilledSlot,i.InvisiblePeg,i.InvisiblePeg],[i.InvisiblePeg,i.InvisiblePeg,i.FilledSlot,i.FilledSlot,i.FilledSlot,i.InvisiblePeg,i.InvisiblePeg],[i.FilledSlot,i.FilledSlot,i.FilledSlot,i.FilledSlot,i.FilledSlot,i.FilledSlot,i.FilledSlot],[i.FilledSlot,i.FilledSlot,i.FilledSlot,i.EmptySlot,i.FilledSlot,i.FilledSlot,i.FilledSlot],[i.FilledSlot,i.FilledSlot,i.FilledSlot,i.FilledSlot,i.FilledSlot,i.FilledSlot,i.FilledSlot],[i.InvisiblePeg,i.InvisiblePeg,i.FilledSlot,i.FilledSlot,i.FilledSlot,i.InvisiblePeg,i.InvisiblePeg],[i.InvisiblePeg,i.InvisiblePeg,i.FilledSlot,i.FilledSlot,i.FilledSlot,i.InvisiblePeg,i.InvisiblePeg]];default:return console.log("DEFAULT"),console.log(E),E}},M=(t(34),function(e){var l=e.newGameFunction,t=e.gameInfo;return Object(p.jsxs)("div",{className:"menu-bar",children:[t.isMultiplayer?null:Object(p.jsx)(g,{clickHandler:function(){l()},title:"New Game",style:{fontSize:"1.2rem"}}),Object(p.jsx)(c.b,{className:"btn",to:"/",children:"Exit"})]})}),w=function(e){var l=e.type,t=e.gameInfo,s=n.a.useState([-1,-1]),a=Object(d.a)(s,2),c=a[0],r=a[1],u=Object(o.useReducer)(G,JSON.parse(JSON.stringify(E))),v=Object(d.a)(u,2),b=v[0],g=v[1],m=n.a.useState("ON"),f=Object(d.a)(m,2),j=f[0],P=f[1],y=n.a.useState(32),O=Object(d.a)(y,2),I=O[0],x=O[1],N=function(){P("ON"),D.newGame(),g({type:S.NewGame,payload:null})};n.a.useEffect((function(){if(console.log("# Gameboard Rerender/render",c,l),0===D.printValidMovesWithoutRepeatitionsAndReturnCount(0)){var e=0;b.forEach((function(l){l.forEach((function(l){l===i.FilledSlot&&(e+=1)}))})),x(e),P("OVER"),console.log("======================================GAME OVER======================================")}}),[c,j,b,l]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"gameboard",children:(console.log(l,": GENERATING BOARD"),b.map((function(e,t){return e.map((function(e,i){return Object(p.jsx)(h,{pegType:b[t][i],pegCoords:[t,i],selectedPeg:c,setSelectedPeg:r,selfBoardState:b,selfBoardStateDispatch:g,type:l},7*t+i)}))})))}),Object(p.jsx)("div",{children:"OVER"===j?Object(p.jsx)(F,{closeFunction:function(){P("ANALYZING"),r([-1,-1]),D.newGame()},newGame:N,pegsRemaining:I}):null}),"SELF"===l?Object(p.jsx)(M,{newGameFunction:N,gameInfo:t}):null]})},A=(t(40),t(41),function(e){var l=e.username;return Object(p.jsxs)("div",{className:"navbar",children:[Object(p.jsx)(c.b,{to:"/",className:"logo",children:"Peg Solitaire"}),Object(p.jsxs)("div",{className:"username",children:[l,Object(p.jsx)("img",{className:"caret",src:"./caret-down-solid.svg",alt:"."})]})]})}),C=function(e){var l=e.gameInfo;return Object(p.jsxs)("div",{className:"gameclient",children:[Object(p.jsx)(A,{username:l.username1}),Object(p.jsx)(w,{type:"SELF",gameInfo:l},1),l.isMultiplayer?Object(p.jsx)(w,{type:"GUEST",gameInfo:l},2):null]})},R=(t(42),function(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(A,{username:"shreyasbg"}),Object(p.jsxs)("div",{className:"homepage",children:[Object(p.jsx)(c.b,{className:"btn-link",to:"/",children:"Home"}),Object(p.jsx)(c.b,{className:"btn-link",to:"/singleplayer",children:"SinglePlayer"}),Object(p.jsx)(c.b,{className:"btn-link",to:"/multiplayer",children:"MultiPlayer"})]})]})}),k=function(){return Object(p.jsx)(c.a,{children:Object(p.jsx)("div",{children:Object(p.jsxs)(r.c,{children:[Object(p.jsx)(r.a,{path:"/singleplayer",children:Object(p.jsx)(C,{gameInfo:{username1:"shreyasbg",isMultiplayer:!1}})}),Object(p.jsx)(r.a,{path:"/multiplayer",children:Object(p.jsx)(C,{gameInfo:{username1:"shreyasbg",isMultiplayer:!0}})}),Object(p.jsx)(r.a,{path:"/homepage",children:Object(p.jsx)(R,{})}),Object(p.jsx)(r.a,{path:"/",children:Object(p.jsx)(R,{})})]})})})};a.a.render(Object(p.jsx)(n.a.StrictMode,{children:Object(p.jsx)(k,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.5020c1ab.chunk.js.map